"use strict";function _slicedToArray(t,i){return _arrayWithHoles(t)||_iterableToArrayLimit(t,i)||_unsupportedIterableToArray(t,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=t[o];return s}function _iterableToArrayLimit(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var o=[],s=!0,e=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done)&&(o.push(a.value),!i||o.length!==i);s=!0);}catch(t){e=!0,n=t}finally{try{s||null==r.return||r.return()}finally{if(e)throw n}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.taAnalytics=function(){return{show:!1,dialog:!1,status:!1,confirmed:!1,options:{id:"",name:"taAnalyticsStorage",question:"question",confirmed:"confirmed",declined:"declined",anonymize_ip:!0,send_page_view:!0,store:"cookie",days:365,delay:5e3,message:"Thank you for supporting our website",test:!1},init:function(t){if(void 0!==t){("object"!==_typeof(t)||t instanceof Array)&&console.warn("TA-Analytics: Options are in wrong type - should be object - default options will be used");for(var i=0,o=Object.entries(t);i<o.length;i++){var s=_slicedToArray(o[i],2),e=s[0],n=s[1];this.options[e]=n}}for(var a=0,r=Object.entries(this.$el.dataset);a<r.length;a++){var l=_slicedToArray(r[a],2),c=l[0],h=l[1];void 0!==this.options[c]&&(this.options[c]=h)}if(this.options.test="true"===String(this.options.test).toLowerCase(),this.options.anonymize_ip="true"===String(this.options.anonymize_ip).toLowerCase(),this.options.send_page_view="true"===String(this.options.send_page_view).toLowerCase(),this.options.delay=parseInt(this.options.delay),this.options.days=parseInt(this.options.days),this.loadStatus(),this.initAnimations(),null===this.status)return this.status=!1,this.dialog=!0,void(this.show=!0);!1!==this.status&&this.loadGoogleTagmanager()},accept:function(){this.saveStatus(!0),this.loadGoogleTagmanager(),this.confirmed=!0,void 0!==this.$refs[this.options.question]&&(this.$refs[this.options.question].classList.remove("ta-analytics-anim-init"),this.$refs[this.options.question].classList.add("ta-analytics-anim-out")),void 0!==this.$refs[this.options.confirmed]&&this.$refs[this.options.confirmed].classList.add("ta-analytics-anim-in"),this.hide()},decline:function(){void 0!==this.$refs[this.options.question]&&(this.$refs[this.options.question].classList.remove("ta-analytics-anim-init"),this.$refs[this.options.question].classList.add("ta-analytics-anim-out")),void 0!==this.$refs[this.options.declined]&&this.$refs[this.options.declined].classList.add("ta-analytics-anim-in"),this.saveStatus(!1),this.hide()},hide:function(){var t=this;this.dialog=!1,this.options.delay>0?setTimeout(function(){t.show=!1},this.options.delay):this.show=!1},initAnimations:function(){void 0!==this.$refs[this.options.question]&&this.$refs[this.options.question].classList.add("ta-analytics-anim","ta-analytics-anim-init"),void 0!==this.$refs[this.options.confirmed]&&this.$refs[this.options.confirmed].classList.add("ta-analytics-anim")},loadStatus:function(){var t=null;null!==(t="cookie"===this.options.store?this.getCookie(this.options.name):localStorage.getItem(this.options.name))?this.status="true"===t:this.status=null},saveStatus:function(t){!0!==this.options.test?(this.status=t,"cookie"!==this.options.store?localStorage.setItem(this.options.name,t):this.setCookie(this.options.name,t,this.options.days)):console.info("TA Analytics is running in test mode - no data will be stored")},getCookie:function(t){var i=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return i?i[2]:null},setCookie:function(t,i,o){var s=new Date;s.setTime(s.getTime()+864e5*o),document.cookie=t+"="+i+";path=/;expires="+s.toGMTString()},loadGoogleTagmanager:function(){var t=this,i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.async=!0,o.onload=function(){t.callGoogleTagManager()},o.src="https://www.googletagmanager.com/gtag/js?id="+this.options.id,i.appendChild(o)},callGoogleTagManager:function(){function t(){dataLayer.push(arguments)}console.info(this.options.message),window.dataLayer=window.dataLayer||[],t("js",new Date),t("config",this.options.id,{anonymize_ip:this.options.anonymize_ip,send_page_view:this.options.send_page_view})}}};